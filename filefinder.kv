#:import hex kivy.utils.get_color_from_hex
#:import Config kivy.config
<ChoiceWindow>:

    canvas.before:
        Color:
            rgba: hex('#202020')
        Rectangle:
            pos: self.pos
            size: self.size



    FloatLayout:
        background_normal: ''
        cols: 1

        FloatLayout:
            background_normal: ''
            size: root.width, root.height

            Label:
                text: "File Finder"
                size_hint: 0.8, 0.2
                pos_hint: {"x": 0.1, "top": 1}
                font_size: 35

            Label:
                text: "Please select your desired search mode:"
                size_hint: 0.81, 0.2
                pos_hint: {"x": 0.1, "top": 0.8}
                valign: "middle"
                font_size: 24

            Label:
                text: "Starts With: Program searches for files that start with a given sequence of characters"
                size_hint: 1, 0.2
                pos_hint: {"top": 0.42, "x": 0}
                font_size: 19

            Label:
                text: "Contains: Program searches for files contain a given sequence of characters"
                size_hint: 0.93, 0.2
                pos_hint: {"top": 0.32, "x": 0}
                font_size: 19

            Label:
                text: "         Ends With: Program searches for files that end with  a given sequence of characters"
                size_hint: 0.95, 0.2
                pos_hint: {"top": 0.22}
                font_size: 19



        Button:

            canvas.before:
                Color:
                    rgba: 0,0,0,1
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height

            text: "Starts With"
            pos_hint: {"top": 0.6}
            size_hint: 0.3, 0.11
            font_size: 24
            background_normal: ''
            color: hex('#202020')
            background_color: hex('#ffffff')
            on_release:
                opacity: 0.5
                root.starts_with_mode()
                root.go_to_input()

            on_press:
                background_down: hex('#DCDCDC')
                background_color: hex('#DCDCDC')


        Button:

            canvas.before:
                Color:
                    rgba: 0,0,0,1
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height

            text: "Specific File/Folder"
            pos_hint: {"top": 0.485}
            size_hint: 1, 0.11
            font_size: 24
            color: hex('#202020')
            background_normal: ''
            background_color: hex('#ffffff')
            on_release:
                opacity: 0.5
                root.specific_mode()
                root.go_to_input()

            on_press:
                background_down: hex('#DCDCDC')
                background_color: hex('#DCDCDC')


        Button:

            canvas.before:
                Color:
                    rgba: 0,0,0,1
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height

            text: "Contains"
            pos_hint: {"top": 0.6, "x": 0.3}
            size_hint: 0.36, 0.11
            font_size: 24
            background_normal: ''
            color: hex('#202020')
            background_color: hex('#ffffff')
            on_release:
                opacity: 0.
                root.contains_mode()
                root.go_to_input()

            on_press:
                background_down: hex('#DCDCDC')
                background_color: hex('#DCDCDC')

        Button:

            canvas.before:
                Color:
                    rgba: 0,0,0,1
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height

            text: "Ends With"
            pos_hint: {"top": 0.6, "x": 0.65}
            size_hint: 0.36, 0.11
            font_size: 24
            background_normal: ''
            color: hex('#202020')
            background_color: hex('#ffffff')
            on_release:
                opacity: 0.5
                root.ends_with_mode()
                root.go_to_input()

            on_press:
                background_down: hex('#DCDCDC')
                background_color: hex('#DCDCDC')

        Button:

            canvas.before:

                Color:
                    rgba: 0,0,0,1
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height

            background_normal: ''
            background_color: hex('#ffffff')
            font_size: 24
            color: hex('#202020')
            text: "Quit"
            size_hint: 1, 0.07
            pos_hint: {"top": 0.07, "x": 0}
            on_press:
                app.stop()




<InputWindow>:
    sequence: sequence


    canvas.before:
        Color:
            rgba: hex('#202020')

        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        text: "Enter a path in which you want to search:"
        font_size: 20
        size_hint: 0.15, 0.2
        pos_hint: {"top": 0.92, "x": 0.095}

    Label:
        text: """Any 'Not responding' states are safe to ignore - The program is just working :)"""
        font_size: 22
        size_hint: 0.15, 0.2
        pos_hint: {"top": 0.3, "x": 0.27}

    Label:
        text: """Visit the 'Settings' tab to configure the results saving option"""
        font_size: 22
        size_hint: 0.15, 0.2
        pos_hint: {"top": 0.6, "x": 0.19}


    Label:
        text: "Enter the sequence of characters or name of the file/folder:"
        font_size: 22
        size_hint: 0.15, 0.2
        pos_hint: {"top": 0.79, "x": 0.188}

    Label:
        text: root.current_mode
        font_size: 22
        size_hint: 0.05, 0.2
        pos_hint: {"top": 0.4, "x": 0.12}


    TextInput:
        id: sequence
        size_hint: 1, 0.05
        pos_hint: {"top": 0.67, "x": 0}

    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        text: "Select Directory in which you want to search"
        font_size: 22
        size_hint: 1, 0.1
        pos_hint: {"top": 0.89, "x": 0}
        on_release:
            root.path = root.get_path()

    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        text: "Show current search mode"
        font_size: 22
        size_hint: 0.3, 0.1
        pos_hint: {"top": 0.45, "x": 0}
        on_release:
            root.mode_init()



    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        text: "Search"
        font_size: 22
        size_hint: 1, 0.1
        color: hex('#202020')
        pos_hint: {"top": 0.1, "x": 0}
        on_release:
            root.init_search()
            text: "Search Again"
            root.reset()



    Button:
        canvas.before:

            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        font_size: 24
        text: "Go Back"
        color: hex('#202020')
        size_hint: 0.30, 0.11
        pos_hint: {"x": 0.35, "top": 1}
        on_release:
            root.init_history()
            root.go_back()


    Button:

        canvas.before:

            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        text: "Settings"
        color: hex('#202020')
        size_hint: 0.37, 0.11
        pos_hint: {"top": 1}
        font_size: 24
        on_release:
            root.check_md()
            root.go_to_settings()


    Button:

        canvas.before:

            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height


        background_normal: ''
        background_color: hex('#ffffff')
        text: "History"
        color: hex('#202020')
        size_hint: 0.37, 0.11
        pos_hint: {"x": 0.63, "top": 1}
        font_size: 24
        on_release:
            root.init_history()
            root.go_to_history()


<SettingsWindow>:

    canvas.before:
        Color:
            rgba: hex('#202020')

        Rectangle:
            pos: self.pos
            size: self.size


    Label:
        text: root.del_logs
        size_hint: 0.15, 0.2
        pos_hint: {"top": 0.32, "x": 0.35}
        font_size: 26

    Label:
        text: "Save every scan result as a separate file"
        size_hint: 0.15, 0.2
        pos_hint: {"top": 0.85, "x": 0.2}
        font_size: 26

    Label:
        text: "Keep overwritting the single log file"
        size_hint: 0.15, 0.2
        pos_hint: {"top": 0.50, "x": 0.17}
        font_size: 26

    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        text: "Delete All Scan Logs"
        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        size_hint: 0.22, 0.15
        pos_hint: {"top": 0.3, "x": 0}
        font_size: 24
        on_release:
            root.delete_logs()



    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        text: root.status_one
        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        size_hint: 0.22, 0.2
        pos_hint: {"top": 0.85, "x": 0.7}
        font_size: 24
        on_release:
            root.updt_init_first()

    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        text: root.status_two
        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        size_hint: 0.22, 0.2
        pos_hint: {"top": 0.50, "x": 0.7}
        font_size: 24
        on_release:
            root.updt_init_sec()

    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        text: "Click to edit and change options"
        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        size_hint: 1, 0.1
        pos_hint: {"top": 1, "x": 0}
        font_size: 24
        on_release:
            root.check_md()

    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        text: "Go Back ->"
        size_hint: 1, 0.11
        pos_hint: {"top": 0.0999}
        font_size: 24
        on_release:
            root.go_back()


<HistoryWindow>:

    canvas.before:
        Color:
            rgba: hex('#202020')

        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        text: "Work In Progress"
        size_hint: 0.15, 0.2
        pos_hint: {"top": 1, "x": 0.43}
        font_size: 26

    Label:
        text: root.last_scan
        size_hint:0.15, 0.2
        pos_hint: {"top": 0.44, "x": 0.43}
        font_size: 18



    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        color: hex('#202020')
        text:"Clear All Scan History"
        font_size: 24
        pos_hint: {"top": 1}
        size_hint: 1, 0.12
        on_release:
            root.clear_history()
            root.init_history()

    Label:
        text: root.if_cleared
        size_hint: 0.15, 0.2
        font_size: 28
        pos_hint: {"top": 0.85, "x": 0.43}



    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        text: "Looking for older scans?"
        color: hex('#202020')
        size_hint: 1, 0.11
        pos_hint: {"top": 0.21}
        font_size: 24
        on_release:
            root.history_pop()


    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        text: "<- Go Back"
        size_hint: 1, 0.11
        color: hex('#202020')
        pos_hint: {"top": 0.0999}
        font_size: 24
        on_release:
            root.init_history()
            root.go_back()

    Button:

        canvas.before:
            Color:
                rgba: 0,0,0,1

            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height

        background_normal: ''
        background_color: hex('#ffffff')
        text:"Show Recent Scan Details"
        color: hex('#202020')
        font_size: 24
        pos_hint: {"top": 0.6}
        size_hint: 1, 0.12
        on_release:
            root.init_history()